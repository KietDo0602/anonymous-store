{"ast":null,"code":"import _regeneratorRuntime from \"H:\\\\React Code\\\\Anonymous online store\\\\React-Shopping-Cart-master\\\\anonymous-online-store\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"H:\\\\React Code\\\\Anonymous online store\\\\React-Shopping-Cart-master\\\\anonymous-online-store\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nvar _jsxFileName = \"H:\\\\React Code\\\\Anonymous online store\\\\React-Shopping-Cart-master\\\\anonymous-online-store\\\\src\\\\components\\\\Home.js\";\nimport React, { useContext } from 'react';\nimport axios from 'axios';\nimport { connect } from 'react-redux';\nimport { addToCart as _addToCart } from './actions/cartActions';\nimport { initState as state } from '../components/reducers/cartReducer';\nimport { UserContext } from \"../UserContext\";\n\nvar contains = function contains(item, arr) {\n  if (arr === null) {\n    return false;\n  }\n\n  for (var i = 0; i < arr.length; i++) {\n    if (arr[i].name === item) {\n      return true;\n    }\n  }\n\n  return false;\n};\n\nvar addItemtoUser =\n/*#__PURE__*/\nfunction () {\n  var _ref = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee(user, addedItem) {\n    var user_id, item_id, item, response;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (!(user !== null)) {\n              _context.next = 7;\n              break;\n            }\n\n            user_id = user.id;\n            item_id = addedItem._id;\n            item = {\n              user_id: user_id,\n              item_id: item_id\n            };\n            _context.next = 6;\n            return axios.post('http://localhost:3001/users/addItem', item);\n\n          case 6:\n            response = _context.sent;\n\n          case 7:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, this);\n  }));\n\n  return function addItemtoUser(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar handleClick =\n/*#__PURE__*/\nfunction () {\n  var _ref2 = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee2(props, item, user) {\n    var arr, addedItem, resp, i, existed, formData, file;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            props.addToCart(item.id);\n\n            if (!(user === null)) {\n              _context2.next = 3;\n              break;\n            }\n\n            return _context2.abrupt(\"return\");\n\n          case 3:\n            arr = null;\n            addedItem = null;\n            _context2.next = 7;\n            return axios.get('http://localhost:3001/items');\n\n          case 7:\n            resp = _context2.sent;\n            arr = Object.values(resp.data);\n\n            for (i = 0; i < state.items.length; i++) {\n              existed = contains(state.items[i].title, arr);\n\n              if (existed === false) {\n                formData = new FormData();\n                file = new File([\"image\"], \"image.jpg\", {\n                  type: \"text/plain\"\n                });\n                formData.append(\"image\", file);\n                formData.append(\"id\", user.id);\n                formData.append(\"name\", state.items[i].title);\n                formData.append(\"desc\", state.items[i].desc);\n                formData.append(\"price\", state.items[i].price);\n                axios.post('http://localhost:3001/items/add', formData, {\n                  headers: {\n                    'Content-Type': 'multipart/form-data; boundary=<calculated when request is sent>'\n                  }\n                }).then(function (response) {\n                  addedItem = response.data;\n                  console.log(\"This is the addedItem: \", addedItem);\n                  addItemtoUser(user, addedItem);\n                }).catch(function (error) {\n                  console.log(error.response);\n                });\n              }\n            }\n\n          case 10:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2, this);\n  }));\n\n  return function handleClick(_x3, _x4, _x5) {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\nfunction Home(props) {\n  var _useContext = useContext(UserContext),\n      user = _useContext.user;\n\n  var itemList = props.items.map(function (item) {\n    return React.createElement(\"div\", {\n      className: \"card\",\n      key: item.id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"card-image\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      className: \"itemsImage\",\n      src: item.img,\n      alt: item.title,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"card-title title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, item.title), React.createElement(\"span\", {\n      to: \"/\",\n      className: \"btn-floating halfway-fab waves-effect waves-light indigo darken-4\",\n      onClick: function onClick() {\n        handleClick(props, item, user);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"large material-icons\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, \"shopping_cart\"))), React.createElement(\"div\", {\n      className: \"card-content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"description\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, item.desc), React.createElement(\"p\", {\n      className: \"price\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, \"Price: \", item.price, \"$\"))));\n  });\n  return React.createElement(\"div\", {\n    className: \"container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }, React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }), \" \", React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }), \" \", React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }), React.createElement(\"h3\", {\n    className: \"center headline\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }, \"116 Tech Shop\"), React.createElement(\"h6\", {\n    className: \"center headline\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }, \"Everything Tech-Related \"), React.createElement(\"hr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"box\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }, itemList));\n}\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    items: state.items\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    addToCart: function addToCart(id) {\n      dispatch(_addToCart(id));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Home);","map":{"version":3,"sources":["H:\\React Code\\Anonymous online store\\React-Shopping-Cart-master\\anonymous-online-store\\src\\components\\Home.js"],"names":["React","useContext","axios","connect","addToCart","initState","state","UserContext","contains","item","arr","i","length","name","addItemtoUser","user","addedItem","user_id","id","item_id","_id","post","response","handleClick","props","get","resp","Object","values","data","items","existed","title","formData","FormData","file","File","type","append","desc","price","headers","then","console","log","catch","error","Home","itemList","map","img","mapStateToProps","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { useContext } from 'react'\r\nimport axios from 'axios';\r\nimport { connect } from 'react-redux'\r\nimport { addToCart } from './actions/cartActions'\r\nimport { initState as state } from '../components/reducers/cartReducer';\r\nimport { UserContext } from \"../UserContext\"\r\n\r\nconst contains = (item, arr) => {\r\n    if (arr === null) {\r\n        return false;\r\n    }\r\n    for (var i = 0; i < arr.length; i++) {\r\n        if (arr[i].name === item) {\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n}\r\n\r\nconst addItemtoUser = async (user, addedItem) => {\r\n    if (user !== null) {\r\n        const user_id = user.id;\r\n        const item_id = addedItem._id;\r\n        var item = { user_id,  item_id};\r\n        const response = await axios.post('http://localhost:3001/users/addItem', item);\r\n    }\r\n}\r\n\r\nconst handleClick = async (props, item, user) => {\r\n    props.addToCart(item.id);\r\n    if (user === null) return;\r\n    var arr = null;\r\n    var addedItem = null;\r\n    const resp = await axios.get('http://localhost:3001/items')\r\n    arr = Object.values(resp.data);\r\n    for (var i = 0; i < state.items.length; i++) {\r\n        const existed = contains(state.items[i].title, arr);\r\n        if (existed === false) {\r\n            var formData = new FormData();\r\n            var file = new File([\"image\"], \"image.jpg\", {\r\n                type: \"text/plain\",\r\n            });\r\n            formData.append(\"image\", file);\r\n            formData.append(\"id\", user.id);\r\n            formData.append(\"name\", state.items[i].title);\r\n            formData.append(\"desc\", state.items[i].desc);\r\n            formData.append(\"price\", state.items[i].price);\r\n            axios.post('http://localhost:3001/items/add', formData, \r\n            {\r\n                headers: {\r\n                    'Content-Type': 'multipart/form-data; boundary=<calculated when request is sent>'\r\n                }\r\n            })\r\n            .then(response => {\r\n                addedItem = response.data;\r\n                console.log(\"This is the addedItem: \", addedItem);\r\n                addItemtoUser(user, addedItem);\r\n            })\r\n            .catch(error => {\r\n                console.log(error.response);\r\n            });\r\n        }\r\n    }\r\n    \r\n}\r\n\r\nfunction Home(props) {\r\n    const { user } = useContext(UserContext);\r\n    let itemList = props.items.map(item => {\r\n        return(\r\n            <div className=\"card\" key={item.id}>\r\n                    <div className=\"card-image\">\r\n                        <img className=\"itemsImage\" src={item.img} alt={item.title}/>\r\n                        <span className=\"card-title title\">{item.title}</span>\r\n                        <span to=\"/\" className=\"btn-floating halfway-fab waves-effect waves-light indigo darken-4\" onClick={()=>{handleClick(props, item, user)}}><i className=\"large material-icons\">shopping_cart</i></span>\r\n                    </div>\r\n    \r\n                    <div className=\"card-content\">\r\n                        <p className=\"description\">{item.desc}</p>\r\n                        <p className=\"price\"><b>Price: {item.price}$</b></p>\r\n                    </div>\r\n             </div>\r\n        )\r\n    })\r\n\r\n    return(\r\n        <div className=\"container\">\r\n            <br/> <br/> <br/>\r\n            <h3 className=\"center headline\">116 Tech Shop</h3>\r\n            <h6 className=\"center headline\">Everything Tech-Related </h6>\r\n            <hr/>\r\n            <div className=\"box\">\r\n                {itemList}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state)=>{\r\n    return {\r\n      items: state.items\r\n    }\r\n}\r\nconst mapDispatchToProps= (dispatch)=>{\r\n    \r\n    return{\r\n        addToCart: (id)=>{dispatch(addToCart(id))}\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps,mapDispatchToProps)(Home);"]},"metadata":{},"sourceType":"module"}