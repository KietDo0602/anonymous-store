{"ast":null,"code":"import _regeneratorRuntime from \"H:\\\\React Code\\\\Anonymous online store\\\\React-Shopping-Cart-master\\\\anonymous-online-store\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"H:\\\\React Code\\\\Anonymous online store\\\\React-Shopping-Cart-master\\\\anonymous-online-store\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nvar _jsxFileName = \"H:\\\\React Code\\\\Anonymous online store\\\\React-Shopping-Cart-master\\\\anonymous-online-store\\\\src\\\\components\\\\Cart.js\";\nimport React, { useContext, useState, useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport axios from 'axios';\nimport { removeItem as _removeItem, addQuantity as _addQuantity, subtractQuantity as _subtractQuantity } from './actions/cartActions';\nimport Recipe from './Recipe';\nimport { UserContext } from \"../UserContext\";\nimport image from \"../images/noproduct.png\";\n\nfunction Cart(props) {\n  var _useContext = useContext(UserContext),\n      user = _useContext.user,\n      setUser = _useContext.setUser;\n\n  var _useState = useState(false),\n      shipping = _useState.shipping,\n      setShipping = _useState.setShipping; // Adding a new item to the cart update\n\n\n  var handleAddQuantity =\n  /*#__PURE__*/\n  function () {\n    var _ref = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee(props, item, user) {\n      var userId, productId, items, response, userUpdated;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!(user === null)) {\n                _context.next = 3;\n                break;\n              }\n\n              props.addQuantity(item.id);\n              return _context.abrupt(\"return\");\n\n            case 3:\n              userId = user._id;\n              productId = item._id;\n              items = {\n                userId: userId,\n                productId: productId\n              };\n              _context.next = 8;\n              return axios.post('http://localhost:3001/users/addItem', items);\n\n            case 8:\n              response = _context.sent;\n              _context.next = 11;\n              return axios.get(\"http://localhost:3001/users/get/\".concat(userId));\n\n            case 11:\n              userUpdated = _context.sent;\n              setUser(userUpdated.data);\n\n            case 13:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, this);\n    }));\n\n    return function handleAddQuantity(_x, _x2, _x3) {\n      return _ref.apply(this, arguments);\n    };\n  }(); // Handle remove a one quantity from an item\n\n\n  var handleSubtractQuantity =\n  /*#__PURE__*/\n  function () {\n    var _ref2 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee2(props, item, user) {\n      var userId, productId, items, response, userUpdated;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              if (!(user === null)) {\n                _context2.next = 3;\n                break;\n              }\n\n              props.removeQuantity(item.id);\n              return _context2.abrupt(\"return\");\n\n            case 3:\n              userId = user._id;\n              productId = item._id;\n              items = {\n                userId: userId,\n                productId: productId\n              };\n              _context2.next = 8;\n              return axios.post('http://localhost:3001/users/removeItem', items);\n\n            case 8:\n              response = _context2.sent;\n              _context2.next = 11;\n              return axios.get(\"http://localhost:3001/users/get/\".concat(userId));\n\n            case 11:\n              userUpdated = _context2.sent;\n              setUser(userUpdated.data);\n\n            case 13:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, this);\n    }));\n\n    return function handleSubtractQuantity(_x4, _x5, _x6) {\n      return _ref2.apply(this, arguments);\n    };\n  }(); // // Handle removing the whole item from the cart, regardless of the quantity\n\n\n  var handleRemove =\n  /*#__PURE__*/\n  function () {\n    var _ref3 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee3(props, item, user) {\n      var userId, productId, items, response, userUpdated;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              if (!(user === null)) {\n                _context3.next = 3;\n                break;\n              }\n\n              props.removeItem(item.id);\n              return _context3.abrupt(\"return\");\n\n            case 3:\n              userId = user._id;\n              productId = item._id;\n              items = {\n                userId: userId,\n                productId: productId\n              };\n              _context3.next = 8;\n              return axios.post('http://localhost:3001/users/removeAll', items);\n\n            case 8:\n              response = _context3.sent;\n              _context3.next = 11;\n              return axios.get(\"http://localhost:3001/users/get/\".concat(userId));\n\n            case 11:\n              userUpdated = _context3.sent;\n              setUser(userUpdated.data);\n\n            case 13:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, this);\n    }));\n\n    return function handleRemove(_x7, _x8, _x9) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var handleChecked = function handleChecked(e) {\n    if (e.target.checked) {\n      setShipping(true);\n    } else {\n      setShipping(false);\n    }\n  };\n\n  var addedItems = null;\n\n  if (user != null) {\n    addedItems = user.cart.length ? user.cart.map(function (item) {\n      return item.quantity !== 0 ? React.createElement(\"li\", {\n        className: \"collection-item avatar\",\n        key: item._id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"item-img\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: image,\n        alt: image,\n        className: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"item-desc\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, item.name), React.createElement(\"p\", {\n        className: \"description\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, item.desc), React.createElement(\"p\", {\n        className: \"price\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, \"Price: $\", item.price)), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, \" Quantity: \", item.quantity, \" \")), React.createElement(\"div\", {\n        className: \"add-remove\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, React.createElement(Link, {\n        to: \"/cart\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"material-icons\",\n        onClick: function onClick() {\n          handleAddQuantity(props, item, user);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, \"arrow_drop_up\")), React.createElement(Link, {\n        to: \"/cart\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"material-icons\",\n        onClick: function onClick() {\n          handleSubtractQuantity(props, item, user);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, \"arrow_drop_down\"))), React.createElement(\"button\", {\n        className: \"waves-effect waves-light btn red remove\",\n        onClick: function onClick() {\n          handleRemove(props, item, user);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, \"Remove All\"))) : React.createElement(React.Fragment, null);\n    }) : React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, \"There is nothing inside your cart. Click \", React.createElement(\"a\", {\n      href: \"/\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, \"here\"), \" to add some to it! \");\n  } else {\n    addedItems = props.items.length ? props.items.map(function (item) {\n      return React.createElement(\"li\", {\n        className: \"collection-item avatar\",\n        key: item.id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"item-img\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: item.img,\n        alt: item.img,\n        className: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"item-desc\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, item.title), React.createElement(\"p\", {\n        className: \"description\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, item.desc), React.createElement(\"p\", {\n        className: \"price\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, \"Price: $\", item.price)), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, \"Quantity: \", item.quantity)), React.createElement(\"div\", {\n        className: \"add-remove\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, React.createElement(Link, {\n        to: \"/cart\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"material-icons\",\n        onClick: function onClick() {\n          handleAddQuantity(props, item, user);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, \"arrow_drop_up\")), React.createElement(Link, {\n        to: \"/cart\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"material-icons\",\n        onClick: function onClick() {\n          handleSubtractQuantity(props, item, user);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, \"arrow_drop_down\"))), React.createElement(\"button\", {\n        className: \"waves-effect waves-light btn red remove\",\n        onClick: function onClick() {\n          handleRemove(props, item, user);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, \"Remove All\")));\n    }) : React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, \"There is nothing inside your cart. Click \", React.createElement(\"a\", {\n      href: \"/\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, \"here\"), \" to add some to it! \");\n  }\n\n  return React.createElement(\"div\", {\n    className: \"container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"cart\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118\n    },\n    __self: this\n  }, React.createElement(\"h5\", {\n    className: \"description\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119\n    },\n    __self: this\n  }, \"You have ordered:\"), React.createElement(\"ul\", {\n    className: \"collection\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120\n    },\n    __self: this\n  }, addedItems)), user !== null ? React.createElement(\"div\", {\n    className: \"container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"collection\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126\n    },\n    __self: this\n  }, React.createElement(\"li\", {\n    className: \"collection-item\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"checkbox\",\n    ref: \"shipping\",\n    onChange: handleChecked,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129\n    },\n    __self: this\n  }), React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130\n    },\n    __self: this\n  }, \"Shipping($35)\"))), React.createElement(\"li\", {\n    className: \"collection-item\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133\n    },\n    __self: this\n  }, React.createElement(\"b\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133\n    },\n    __self: this\n  }, \"Total: $ \", shipping ? user.total + 35 : user.total, \" \"))), React.createElement(\"div\", {\n    className: \"checkout\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    className: \"waves-effect waves-light blue btn\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136\n    },\n    __self: this\n  }, \"Checkout\"))) : React.createElement(Recipe, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139\n    },\n    __self: this\n  }));\n}\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    items: state.addedItems,\n    addedItems: state.addedItems\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    removeItem: function removeItem(id) {\n      dispatch(_removeItem(id));\n    },\n    addQuantity: function addQuantity(id) {\n      dispatch(_addQuantity(id));\n    },\n    subtractQuantity: function subtractQuantity(id) {\n      dispatch(_subtractQuantity(id));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Cart);","map":{"version":3,"sources":["H:\\React Code\\Anonymous online store\\React-Shopping-Cart-master\\anonymous-online-store\\src\\components\\Cart.js"],"names":["React","useContext","useState","useEffect","connect","Link","axios","removeItem","addQuantity","subtractQuantity","Recipe","UserContext","image","Cart","props","user","setUser","shipping","setShipping","handleAddQuantity","item","id","userId","_id","productId","items","post","response","get","userUpdated","data","handleSubtractQuantity","removeQuantity","handleRemove","handleChecked","e","target","checked","addedItems","cart","length","map","quantity","name","desc","price","img","title","total","mapStateToProps","state","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { useContext, useState, useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Link } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport { removeItem,addQuantity,subtractQuantity} from './actions/cartActions';\r\nimport Recipe from './Recipe';\r\nimport {UserContext} from \"../UserContext\";\r\nimport image from \"../images/noproduct.png\"\r\n\r\nfunction Cart(props) {\r\n    const { user, setUser } = useContext(UserContext);\r\n    const { shipping, setShipping } = useState(false);\r\n\r\n    // Adding a new item to the cart update\r\n    const handleAddQuantity = async (props, item, user) => {\r\n        if (user === null) {\r\n            props.addQuantity(item.id);\r\n            return;\r\n        }\r\n        const userId = user._id;\r\n        const productId = item._id;\r\n        var items = {userId, productId};\r\n        const response = await axios.post('http://localhost:3001/users/addItem', items);\r\n        let userUpdated = await axios.get(`http://localhost:3001/users/get/${userId}`);\r\n        setUser(userUpdated.data);\r\n    }\r\n\r\n\r\n    // Handle remove a one quantity from an item\r\n    const handleSubtractQuantity = async (props, item, user) => {\r\n        if (user === null) {\r\n            props.removeQuantity(item.id);\r\n            return;\r\n        }\r\n        const userId = user._id;\r\n        const productId = item._id;\r\n        var items = {userId, productId};\r\n        const response = await axios.post('http://localhost:3001/users/removeItem', items);\r\n        let userUpdated = await axios.get(`http://localhost:3001/users/get/${userId}`);\r\n        setUser(userUpdated.data);\r\n    }\r\n    // // Handle removing the whole item from the cart, regardless of the quantity\r\n    const handleRemove = async (props, item, user) => {\r\n        if (user === null) {\r\n            props.removeItem(item.id);\r\n            return;\r\n        }\r\n        const userId = user._id;\r\n        const productId = item._id;\r\n        var items = {userId, productId};\r\n        const response = await axios.post('http://localhost:3001/users/removeAll', items);\r\n        let userUpdated = await axios.get(`http://localhost:3001/users/get/${userId}`);\r\n        setUser(userUpdated.data);\r\n    }\r\n\r\n    const handleChecked = (e) => {\r\n        if(e.target.checked) {\r\n            setShipping(true);\r\n        } else {\r\n            setShipping(false);\r\n        }\r\n    }\r\n\r\n    var addedItems = null;\r\n    if (user != null) {\r\n            addedItems = user.cart.length ? ( user.cart.map(item => {\r\n            return (\r\n                item.quantity !== 0 ?\r\n                <li className=\"collection-item avatar\" key={item._id}>\r\n                    <div className=\"item-img\"> \r\n                        <img src={image} alt={image} className=\"\"/>\r\n                    </div>\r\n                    <div className=\"item-desc\">\r\n                        <span className=\"title\">{item.name}</span>\r\n                        <p className=\"description\">{item.desc}</p>\r\n                        <p className=\"price\"><b>Price: ${item.price}</b></p> \r\n                        <p>\r\n                            <b> Quantity: { item.quantity } </b> \r\n                        </p>\r\n                        <div className=\"add-remove\">\r\n                            <Link to=\"/cart\"><i className=\"material-icons\" onClick={()=>{handleAddQuantity(props, item, user)}}>arrow_drop_up</i></Link>\r\n                            <Link to=\"/cart\"><i className=\"material-icons\" onClick={()=>{handleSubtractQuantity(props, item, user)}}>arrow_drop_down</i></Link>\r\n                        </div>\r\n                        <button className=\"waves-effect waves-light btn red remove\" onClick={()=>{handleRemove(props, item, user)}}>Remove All</button>\r\n                    </div>\r\n                </li>\r\n                : <></>\r\n            )\r\n            })) : ( <p>There is nothing inside your cart. Click <a href=\"/\">here</a> to add some to it! </p> );\r\n    } else {\r\n            addedItems = props.items.length ? ( props.items.map(item => {\r\n                return(\r\n                    <li className=\"collection-item avatar\" key={item.id}>\r\n                        <div className=\"item-img\"> \r\n                            <img src={item.img} alt={item.img} className=\"\"/>\r\n                        </div>\r\n                    \r\n                        <div className=\"item-desc\">\r\n                            <span className=\"title\">{item.title}</span>\r\n                            <p className=\"description\">{item.desc}</p>\r\n                            <p className=\"price\"><b>Price: ${item.price}</b></p> \r\n                            <p>\r\n                                <b>Quantity: {item.quantity}</b> \r\n                            </p>\r\n                            <div className=\"add-remove\">\r\n                                <Link to=\"/cart\"><i className=\"material-icons\" onClick={()=>{handleAddQuantity(props, item, user)}}>arrow_drop_up</i></Link>\r\n                                <Link to=\"/cart\"><i className=\"material-icons\" onClick={()=>{handleSubtractQuantity(props, item, user)}}>arrow_drop_down</i></Link>\r\n                            </div>\r\n                            <button className=\"waves-effect waves-light btn red remove\" onClick={()=>{handleRemove(props, item, user)}}>Remove All</button>\r\n                        </div>\r\n                    </li> \r\n                )\r\n                })\r\n            ): ( <p>There is nothing inside your cart. Click <a href=\"/\">here</a> to add some to it! </p> );\r\n    }\r\n    return(\r\n        <div className=\"container\">\r\n            <div className=\"cart\">\r\n                <h5 className=\"description\">You have ordered:</h5>\r\n                <ul className=\"collection\">\r\n                    {addedItems}\r\n                </ul>\r\n            </div>\r\n            { user !== null ?\r\n                <div className=\"container\">\r\n                    <div className=\"collection\">\r\n                        <li className=\"collection-item\">\r\n                            <label>\r\n                                <input type=\"checkbox\" ref=\"shipping\" onChange= {handleChecked} />\r\n                                <span>Shipping($35)</span>\r\n                            </label>\r\n                        </li>\r\n                        <li className=\"collection-item\"><b>Total: $ {shipping ? (user.total + 35) : user.total} </b></li>\r\n                    </div>\r\n                    <div className=\"checkout\">\r\n                        <button className=\"waves-effect waves-light blue btn\">Checkout</button>\r\n                    </div>\r\n                </div>\r\n            : <Recipe /> }\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state)=>{\r\n    return{\r\n        items: state.addedItems,\r\n        addedItems: state.addedItems\r\n    }\r\n}\r\nconst mapDispatchToProps = (dispatch)=>{\r\n    return{\r\n        removeItem: (id)=>{dispatch(removeItem(id))},\r\n        addQuantity: (id)=>{dispatch(addQuantity(id))},\r\n        subtractQuantity: (id)=>{dispatch(subtractQuantity(id))}\r\n    }\r\n}\r\nexport default connect(mapStateToProps,mapDispatchToProps)(Cart)"]},"metadata":{},"sourceType":"module"}